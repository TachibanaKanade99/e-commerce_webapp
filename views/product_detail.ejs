<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
	<title> JustShop Website - <%= product.product_name %></title>
	<%- include('layout/css_links.ejs') %>
</head>

<body>
    <%-include('./layout/header.ejs');%>
    <script>
        var productId = <%= product.id %>
    </script>

    <div class="container">
        <div class="row" style="padding-top: 130px;">
            <div class="col-10 col-md-11">
                <span class="h3">Product detail</span>
            </div>
            <div class="col-2 col-md-1">
                <a href= <%= "/products?category=" + currentCategory + "&page=" + currentPage %> class="btn btn-primary back-btn mb-2 px-4">Back</a>
            </div>
            <hr class="my-0">
        </div>

        <div class="product-detail">
            <div class="row my-3">
                <div class="col-12 col-md-6">
                    <img class="col-10" src= <%= product.image_url %> alt="this-is-image-of-product">
                </div>
                <div class="col-12 col-md-6 mt-5">
                    <div class="h3"> <%= product.product_name %> </div>
                    <div class="py-2">
                        <span class="h4">Brand: </span>
                        <span class="product-info"> <%= product.brand %> </span>
                    </div>
                    <div  class="py-2">
                        <span class="h4">Made in: </span>
                        <span class="product-info"> <%= product.made_in %> </span>
                    </div>
                    <div class="py-2">
                        <span class="h4">Rating: </span>
                        <% const floorRating = Math.round(product.average_rating); %>
                        <% const remainStars = 5 - floorRating; %>
                        <span class="rating">
                            <% for (let j = 0; j < floorRating; j++) { %>
                                <i class="fa fa-star" ></i>
                            <% } %>
                            
                            <% for (let h = 0; h < remainStars; h++) { %>
                                <i class="fa fa-star-o" ></i>
                            <% } %>
                        </span>

                        <span class="rating-detail-number">
                            (<%= product.average_rating %>)
                        </span>
                    </div>
                    <div class="mt-3 product-price">
                        20000d
                    </div>
                    <div class="quantity">
                        
                    </div>
                    <div class="add-to-cart">
                        <div class="justify-content-center text-center">
                            <div class="buttons d-flex flex-row">
                                <div class="cart">
                                    <i class="fa fa-shopping-cart"></i>
                                </div> 
                                <button class="btn btn-success cart-btn" onclick="addToCart(<%= '\"' + product.product_name + '\"'%>, 20000)">
                                    <span class="dot">1</span>
                                    Add to cart 
                                </button>
                                <div class="px-1"></div>
                                <button href="" class="btn btn-primary wishlist-btn">Add to wishlist</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <% if (product.description) { %>
                <div class="product-description mt-5">
                    <span class="h4">Product Description: </span>
                    <span class="product-description-text"> <%= product.description %> </span>
                </div>
            <% } %>
            
            <div class="users-rating mt-5">
                <span class="h4">Rate our product:</span>
                <ul class="rating">
                    <li class="star">
                      <i class="fa fa-lg fa-star-o fa-fw"></i>
                    </li>
                    <li class="star">
                        <i class="fa fa-lg fa-star-o fa-fw"></i>
                    </li>
                    <li class="star">
                        <i class="fa fa-lg fa-star-o fa-fw"></i>
                    </li>
                    <li class="star">
                        <i class="fa fa-lg fa-star-o fa-fw"></i>
                    </li>
                    <li class="star">
                        <i class="fa fa-lg fa-star-o fa-fw"></i>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div style="height: 50vh;"></div>

    <%-include('./layout/footer.ejs');%>
</body>